# 資料ダウンロードとサンクスメールの設定方法

  

LPページ上の資料ダウンロード機能とサンクスメール送信の設定方法について説明します。

  

## 設定手順

  

### 1. データ設定ファイルの確認

  

対象のLPフォルダ内の設定ファイルを確認します。

  

```

src/lp/[LP名]/data.json

```

  

### 2. 資料ダウンロードの設定

  

`pdf` フィールドにダウンロードされる資料名を記載します。

  

```json

{

"pdf": "[資料ファイル名]" // 拡張子なしの場合はPDFとして扱われます

}

```

  

> 📁 **重要**: ダウンロードファイル（PDF、ZIP等）は `src/common/documents` フォルダ内に格納してください

  

#### PDF フィールドの設定値一覧

  

| 設定値 | 説明 |

|:------:|:-----|

| `"[拡張子なし]"` | 指定したPDFファイルをダウンロード資料として送信します。<br>自動的に `.pdf` が付与されます。 |

| `"[ファイル名].zip"` などの<br>拡張子付きファイル名 | 指定した拡張子のファイル（ZIP、DOCXなど）を<br>ダウンロード資料として送信します。 |

| `"#estimate#"` | 資料ダウンロードなし。<br>見積もり用のサンクスメールのみを送信します。 |

  

### 3. サンクスページの設定

  

`contact_form_thanks` フィールドにサンクスページのファイルパスを指定します。

  

> ⚠️ 指定する拡張子は `.ejs` ではなく `.html` にしてください

> （ejsは開発用、最終的にはhtmlになります）

  

```json

{

"contact_form_thanks": "/[LP名]/thanks.html"

}

```

  

ここで指定したパスが、フォーム送信後に遷移するサンクスページになります。

  

#### フォームの実装方法

  

フォームを実装する際の注意点：

  

> ⚠️ **重要**: フォーム内の隠しフィールド（hidden）は、サンクスメールの送信に必要なので削除しないでください。

  

```html

<!-- content.ejs-->

<input type="hidden" name="dkey" value="<%- pdf %>">

```

  

この`name="dkey"`が`src/form/environment/config.[stg|prod].js`の`dkey`フィールドと対応しており、googleフォームの項目とマッピングされます。（紐づいているスプシにデータが「メール区分」項目として連携されます）

  

#### サンクスページの実装方法

  

サンクスページにはダウンロード用のリンクが必要です：

  

ダウンロードリンクを実装する際は、以下の形式で記述してください：

  

```html

<!-- thanks.ejs-->

<a class="c-btn" id="document" href="/documents/<%- pdf %>.pdf" download target="_blank">ダウンロード</a>

```

  

PDF以外のファイルタイプ（ZIP等）の場合も、EJSテンプレート内では`<%- pdf %>`変数がファイル名のみを表し、拡張子が自動的に付与されないため、明示的に拡張子を指定する必要があります。

  

例：ZIPファイルの場合

```html

<a class="c-btn" id="document" href="/documents/<%- pdf %>.zip" download target="_blank">ダウンロード</a>

```

  

> ⚠️ **重要**: サンクスページのリンクには必ず適切なクラスとID (`class="c-btn" id="document"`) を指定し、属性 (`download target="_blank"`) を含めてください。

> これらの属性が欠けていると、ダウンロード機能が正常に動作しない可能性があります。

  

#### サンクスメールについて

  

サンクスメールには以下の2種類があります：

  

1. **資料請求メール**: 資料ダウンロード時に送信されるメール

2. **見積もりメール**: 見積もり依頼時に送信されるメール

  

メール送信の仕様:

  

- 各種類のメールは現在**1種類ずつ**しか用意されていません

- 見積もりメールを送信する場合は、必ず `"pdf": "#estimate#"` を設定してください

- `pdf` フィールドに何らかのファイル名が指定されている場合、自動的に資料請求メールが送信されます

  

> ⚠️ **注意**: メールの文言を変更する必要がある場合は、**必ずエンジニアへ依頼**してください。

> 現在のシステムでは、メールテンプレートを追加・変更する際にはシステム改修が必要です。

  

##### 資料請求メールの内容

  

資料請求時に送信されるメールの内容は以下の通りです：

  

**件名**

```

【エムスリーヘルスデザイン】資料請求ありがとうございました

```

  

**本文**

```

[会社名]

[お名前] 様

  

この度は資料をご請求いただきありがとうございます。

資料は以下よりダウンロードしていただけます。

  

[資料URL]

  

エムスリーヘルスデザインでは、健康管理システム「ハピネスパートナーズ」をはじめ、健診予約代行や、健康経営コンサルティング、巡回健診、ストレスチェックなど、従業員の健康管理に関する様々なサービスを用意しています。

  

また、以下は無料でご提供できますので、是非お打ち合わせの時間をいただけないでしょうか。

  

【無料でご提供できること】

1.健康経営推進のためのコンサルティング

2.貴社の場合、どれぐらい工数が削減できるかの試算

3.サービスのトライアルで操作感を確認

4.導入した場合の具体的な金額の算出

5.社内稟議資料の作成支援

6.貴社の業種や状況に近い他社の導入事例

など

  

ご希望の方は以下の欄よりご都合のよい日時をご返信ください。

日程が未定の場合、「興味あり」とだけご返信いただけますと幸いです。

  

--------------------------------------------------------

【ご希望日時】

  

第1希望

●月●日　●時～●時

  

第2希望

●月●日　●時～●時

--------------------------------------------------------

※所要時間は1時間程度です

  

以上、今後とも宜しくお願いいたします。

  

--------------------------------------------------------

エムスリーヘルスデザイン株式会社

〒604-8162

京都市中京区烏丸通六角下ル七観音町638　東洋烏丸ビル2階

TEL　075-256-8500（代表）FAX　075-256-8285

```

  

#### 設定例

  

```json

{

"contact_form_thanks": "/short_3documents_health-check/thanks.html",

"pdf": "3documents_health-check.zip"

}

```

  

この例では:

- フォーム送信後に `/short_3documents_health-check/thanks.html` に遷移します

- 資料ダウンロードとして `3documents_health-check.zip` ファイルを送信します